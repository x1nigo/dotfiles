#! /bin/sh

case $BUTTON in
        1) notify-send -t 6000 "ğŸŒ‘ğŸŒ± Torrent module:" "
ğŸ›‘: Paused
ğŸ•°ï¸: Idle
â¤´ï¸: Uploading
â¤µï¸: Downloading
âœ…: Done
ğŸŒ±: Seeding
ğŸŒ‘: No torrents" ;;
        3) st -e $EDITOR $HOME/.local/bin/statusbar/db-torrent ;;
        5) st -e $EDITOR ${XDG_CONFIG_HOME:-$HOME/.config}/dwmblocks/blocks.h ;;
esac

active=$(transmission-remote -l | grep %)
[ -z $active ] && printf "ğŸŒ‘ğŸŒ±" && exit 1

transmission-remote -l | grep % |
        sed "
        s/.*Stopped.*/ğŸ›‘/;
        s/.*Seeding.*/ğŸŒ±/;
        s/.*100%.*/âœ…/;
        s/.*Idle.*/ğŸ•°ï¸/;
        s/.*Uploading.*/â¤´ï¸/;
        s/.*%.*/â¤µï¸/"
                sort -h | uniq -c | awk '{print $2 $1}' | paste -sd ' ' -
