#!/bin/sh

# TODO: Find a way to add torrents as the user clicks upon the download link.
# To add a torrent, open your terminal and type transmission-remote -a "<insert link>".

# Display default icon if no torrent is active.
active="$(transmission-remote -l | grep %)"
[ -z "$active" ] && exit

case $BUTTON in
	1) ${TERMINAL:-st} -e stig ;;
	3) notify-send "ğŸŒ± Torrent Module:" "Left-click to display your current torrents (stig).
- ğŸŒ± Seeding
- ğŸ›‘ Stopped
- âœ… Done
- ğŸ•°ï¸ Idle
- â¬†ï¸ Uploading
- â¬‡ï¸ Downloading" ;;
	6) ${TERMINAL:-st} -e "$EDITOR" "$0" ;;
esac

# Show the proper icon depending on status of the torrent/s.
transmission-remote -l | grep % |
	sed " # The letters are for sorting and will not appear.
	s/.*Stopped.*/A ğŸ›‘/;
	s/.*Seeding.*/Z ğŸŒ±/;
	s/.*100%.*/N âœ…/;
	s/.*Idle.*/B ğŸ•°ï¸/;
	s/.*Uploading.*/L â¬†ï¸/;
	s/.*%.*/M â¬‡ï¸/" |
		sort -h | uniq -c | awk '{print $3 $1}' | paste -sd ' ' -
