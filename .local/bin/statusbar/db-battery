#! /bin/sh

dir="/sys/class/power_supply/BAT0"
bat=$(cat $dir/capacity) && stat=$(cat $dir/status)

case $stat in
        Discharging) icon="ğŸ”‹" && [ $bat -le 5 ] && notify-send "ğŸ’€ Pretty please, charge me right now. . . with a little bit of sugar on top." || [ $bat -le 10 ] && [ $bat -gt 5 ] && notify-send "ğŸ’€ I swear, if you don't charge me soon, I'm going to dieâ—" ;;
        Charging) icon="ğŸ”Œ" ;;
        Full) icon="âš¡" && notify-send "âš¡ Hey, I'm fully charged. You can unplug me now." ;;
        *) icon="ğŸ¦¥" ;;
esac

case $BUTTON in
        1) notify-send "$icon Battery device status is '$stat'!" ;;
        3) st -e $EDITOR $HOME/.local/bin/statusbar/db-battery ;;
        5) st -e $EDITOR ${XDG_CONFIG_HOME:-$HOME/.config}/dwmblocks/blocks.h ;;
esac

printf "%s%s%%\n" "$icon" "$bat"
