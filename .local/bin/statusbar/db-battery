#! /bin/sh

dir="/sys/class/power_supply/BAT0"
bat=$(cat $dir/capacity) && stat=$(cat $dir/status)

case $stat in
        Discharging) if [ $bat -gt 10 ]; then
                        icon="ğŸ”‹"
                elif [ $bat -le 10 ] && [ $bat -gt 5 ]; then
                        icon="â—ğŸ”‹" && notify-send "$icon Battery level is LOW." "Please charge your device soon."
                else
                        icon="ğŸ’€" && notify-send -u critical "$icon Battery level is DANGEROUSLY LOW." "Charge your device RIGHT THE FUCK NOW!"
                fi ;;
        Charging) icon="ğŸ”Œ" ;;
        Full) icon="âš¡" && notify-send "âš¡ Hey, I'm fully charged. You can unplug me now." ;;
        *) icon="ğŸ•°ï¸" ;;
esac

case $BUTTON in
        3) notify-send "ğŸ”‹ Battery module:" "
ğŸ“œ Legend:
ğŸ”Œ: charging
âš¡: fullly-charged
ğŸ•°ï¸: stagnant
ğŸ”‹: discharging (normal)
ğŸ’€: near-death experience" ;;
        5) st -e $EDITOR ${XDG_CONFIG_HOME:-$HOME/.config}/dwmblocks/blocks.h ;;
esac

printf "%s%s%%\n" "$icon" "$bat"
