#!/bin/sh

# This is a rewritten script for the battery module.

# Basic variables for battery module
dir="/sys/class/power_supply/BAT0"
bat=$(cat $dir/capacity)
stat=$(cat $dir/status)

# Notify when clicked via the right mouse button
case $BUTTON in
        3) notify-send "âš¡ Battery module" "Displays battery status.
- ğŸ”Œ charging
- âš¡ fully-charged
- ğŸ¦¥ stagnant
- ğŸ”‹ discharging
- ğŸª« low battery (please charge!)" ;;
        5) $TERMINAL -e $EDITOR "$0" ;;
esac

# Provide a warning symbol for low power and proper notifications for promptness
[ $stat = "Discharging" ] && [ $bat -le 10 ] && [ $bat -gt 5 ] \
	&& notify-send "ğŸª« Battery level is low." "Please charge your device soon." \
	&& printf "%s%s\n" "$warn" "ğŸª«$bat%" && exit
[ $stat = "Discharging" ] && [ $bat -le 5 ] && warn="â—" && \
	notify-send -u critical "ğŸª« Battery level is dangerously low." "Charge your device ASAP." \
	&& printf "%s%s\n" "$warn" "ğŸª«$bat%" && exit

printf "%s%s%s\n" "$(echo $stat | sed 's/Discharging/ğŸ”‹/;s/Charging/ğŸ”Œ/;s/Full/âš¡/;s/Not charging/ğŸ¦¥/')" "$warn" "$(echo $bat | sed 's/$/%/')"
