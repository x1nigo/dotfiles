#!/bin/sh

case $BUTTON in
	1) ${TERMINAL:-st} -e nmtui ;;
	3) notify-send "ðŸ›œ Network Module:" "Left-click to connect to the internet (nmtui).
- ðŸ›œ Connected to Wi-Fi
- ðŸ“¡ Not connected to Wi-Fi
- âŒ Wi-Fi down
- âŽ Not connected to Ethernet
- ðŸŒ Connected to Ethernet" ;;
	6) ${TERMINAL:-st} -e "$EDITOR" "$0" ;;
esac

if grep -xq 'up' /sys/class/net/wl*/operstate 2>/dev/null; then
	wlicon="$(awk '/wl/ {print "ðŸ›œ", int($3 * 100 / 70) }' /proc/net/wireless)%"
elif grep -xq 'down' /sys/class/net/wl*/operstate 2>/dev/null; then
	grep -xq '0x1003' /sys/class/net/wl*/flags && wlicon="ðŸ“¡" || wlicon="âŒ"
fi

printf "%s%s\n" "$wlicon " "$(sed 's/down/âŽ/;s/up/ðŸŒ/' /sys/class/net/e*/operstate 2>/dev/null)"
