#! /bin/sh

if grep -x 'up' /sys/class/net/wl*/operstate >/dev/null 2>&1 ; then
        wlicon="ğŸ“¶" && perc="$(awk '/wl/ { print int($3 * 100 / 70) }' /proc/net/wireless)%"
else
        wlicon=
fi

[ $(grep -x 'up' /sys/class/net/e*/operstate) >/dev/null 2>&1 ] && ethicon="ğŸŒ" || ethicon=

case $BUTTON in
        1) notify-send -t 5000 "ğŸŒ connected to: \`$(nmcli -t -f name connection show --active)\` ;;
        3) st -e $EDITOR ~/.local/bin/statusbar/db-network ;;
        4) st -e nmtui ;;
        5) st -e $EDITOR ~/.config/dwmblocks/blocks.h ;;
esac

printf "%s%s %s\n" "$wlicon" "$perc" "$ethicon"
