#!/bin/sh

menu=$(printf "%s\n" "[&] lock screen" "[x] power off" "[@] reboot" "[<] leave" "[ ] display off" | dmenu -l 5 -p 'System Action:')
wm="dwm"

# This depends on your system.
if [ $(ls -l /sbin/init | cut -d' ' -f 11) = "runit-init" ]; then
	init="loginctl" && cmd="poweroff"
else
	unset init && cmd="halt -p"
fi

case $menu in
	"[&]"*) slock && $(notify-send "Computer session unlocked." "Welcome back, $USER. Enjoy your stay.") ;;
	"[x]"*) $init $cmd ;;
	"[@]"*) $init reboot ;;
	"[<]"*) kill $(pgrep -x $wm) ;;
	"[ ]"*) xset dpms force off ;;
	*) exit ;;
esac
