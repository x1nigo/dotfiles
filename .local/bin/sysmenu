#!/bin/sh

menu=$(printf "%s\n" "🖥️ power off" "♻️ restart dwm" "🔃 reboot" "🚪 leave" "💤 sleep" "🔒 lock" "📺 display off" | dmenu -p "System:")

wm="dwm"
if ls -l /sbin/init | grep "systemd"; then
	cmd="systemctl"
else
	cmd="loginctl"
fi

case $menu in
        🖥️*) $cmd poweroff ;;
	♻️*) kill -HUP $(pidof -s dwm) ;;
        🔃*) $cmd reboot ;;
        🚪*) killall $wm ;;
        💤*) slock $cmd suspend -i && $(notify-send "💡 Computer session recovered from sleep." "Welcome back, $USER. Enjoy your stay.") ;;
        🔒*) slock && $(notify-send "🔓 Computer session unlocked." "Welcome back, $USER. Enjoy your stay.") ;;
	📺*) xset dpms force off ;;
	*) exit 1 ;;
esac
