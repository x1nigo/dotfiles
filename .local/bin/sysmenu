#! /bin/sh

menu=$(printf "%s\n" "🔒 lock screen" "💻 power off" "🔃 reboot" "♻️ renew wm" "🚪 leave" "💤 sleep" "📺 display off" | dmenu -l 10 -p 'System action:')
wm="dwm"

if ls -l /sbin/init | grep "systemd"; then
	cmd="systemctl"
else
	cmd="loginctl"
fi

case $menu in
        🔒*) slock && $(notify-send "🔓 Computer session unlocked." "Welcome back, $USER. Enjoy your stay.") ;;
        💻*) $cmd poweroff ;;
        🔃*) $cmd reboot ;;
	♻️*) kill -HUP $(pidof -s $wm) ;;
	🚪*) kill $(pidof -x $wm) ;;
        💤*) slock $cmd suspend -i && $(notify-send "💡 Computer session recovered from sleep." "Welcome back, $USER. Enjoy your stay.") ;;
	📺*) xset dpms force off ;;
	*) exit ;;
esac
